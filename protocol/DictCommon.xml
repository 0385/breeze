<?xml version="1.0" encoding="UTF-8"?>

<ProtoTraits>
  <MinNo>10000</MinNo>
  <MaxNo>11000</MaxNo>
  <UseLog4z>1</UseLog4z>
</ProtoTraits>


<Proto>

    <array name="DictArrayValue" type="double" desc="通用Value数组" />
    <array name="DictArrayKey" type="ui64" desc="通用KEY数组" />
    <map name="DictMapKeyValue" key="ui64" value="double" desc="通用Key value" />

    <packet name="DictPairValue"  desc= "">
        <member name="val1" type="ui64"   desc=""/>
        <member name="val2" type="ui64"   desc=""/>
    </packet>
    <map name="DictMapKeyPairValue" key="ui64" value="DictPairValue" desc="" />
  

    <!------------- 全局配置 ---------------------->
    <packet name="DictGlobal" store="MyISAM" desc= "全局配置">
        <member name="id" type="ui64" tag="key"   desc=""/>
        <member name="val" type="ui64"   desc="整数"/>
        <member name="valFloat" type="double"   desc="浮点数"/>
        <member name="combo" type="string"   desc="字符串"/>
        <member name="desc" type="string"   desc=""/>
    </packet>
    <array name="DictGlobalArray" type="DictGlobal" desc="" />
    <map name="DictGlobalMap" key="ui64" value="DictGlobal" desc="" />


    <!------------- 道具, 掉落, 抽奖 ---------------------->
    <packet name="DictDrop" store="MyISAM"  desc= "道具抽奖,道具掉落">
        <member name="id" type="ui64" tag="key"  desc=""/>
        <member name="dropType" type="ui16"   desc="0 独立随机, 所有奖品根据自身概率随机,  1 从奖池中抽取一个奖品, 如果所有奖品概率总和小于1则可能什么都抽取不到"/>
        <member name="rewards" type="DictMapKeyPairValue" tag="ignore"  desc="奖池"/>
        <member name="rewardsText" type="string"   desc="奖池 格式为 id|count|prob,id|count|prob "/>
        <member name="desc" type="string"   desc=""/>
    </packet>


    <packet name="DictItem" store="MyISAM"  desc= "道具字典">
        <member name="id" type="ui64" tag="key"  desc=""/>
        <member name="icon" type="ui16"   desc=""/>
        <member name="autoUse" type="ui16"   desc="0 手动, 其他 自动使用"/>
        <member name="stacks" type="double"   desc="可堆叠个数,0和1都是1次"/>
        <member name="costItems" type="DictMapKeyValue"  tag="ignore"  desc="使用该道具需要消耗的其他道具"/>
        <member name="costItemsText" type="DictMapKeyValue"   desc="使用该道具需要消耗的其他道具"/>
        <member name="dropID" type="ui64"   desc="使用该道具后会产生掉落效果 0为无效"/>
        <member name="propID" type="ui64"   desc="装备该道具带来的属性加成"/>
        <member name="skills" type="DictArrayKey"  tag="ignore" desc="装备该道具带来的可用技能"/>
        <member name="skillsText" type="string"   desc="装备该道具带来的可用技能 格式id,id,id "/>
        <member name="buffs" type="DictArrayKey"  tag="ignore" desc="装备该道具带来的可用buff"/>
        <member name="buffsText" type="string"   desc="装备该道具带来的可用buff 格式id,id,id"/>

        <member name="visible" type="ui16"   desc="是否可见"/>
        <member name="desc" type="string"   desc=""/>
    </packet>
    <array name="DictItemArray" type="DictItem" desc="" />
    <map name="DictItemMap" key="ui64" value="DictItem" desc="" />



    <struct name="DictProp" store="MyISAM" desc="战斗属性">
        <member name="id" type="ui64" tag="key"  desc=""/>
        <member name="hp" type="double"   desc="血量值"/>
        <member name="hpRegen" type="double"   desc="每秒血量值恢复"/>
        <member name="attack" type="double"   desc="伤害"/>
        <member name="defense" type="double"   desc="防御"/>
        <member name="crit" type="double"   desc="暴击"/>
        <member name="toughness" type="double"   desc="韧性"/>
        <member name="moveSpeed" type="double"   desc="移动速度"/>
        <member name="attackSpeed" type="double"   desc="攻击速度"/>
        <member name="vampirk " type="double"   desc="吸血"/> 
    </struct>
    <array name="DictPropArray" type="DictProp" desc="" />
    <map name="DictPropMap" key="ui64" value="DictProp" desc="" />

    <struct name="DictModelLevel" store="MyISAM" desc="">
        <member name="modelID" type="ui64" tag="key"  desc=""/>
        <member name="levelID" type="ui64" tag="key"  desc=""/>
        <member name="needExp" type="double"   desc="升级所需经验"/>
        <member name="propID" type="ui64"   desc="战斗属性"/>
        <member name="skills" type="DictArrayKey" tag="ignore"  desc="该等级带来的可用技能"/>
        <member name="skillsText" type="string"   desc="该等级带来的可用技能 格式id,id,id "/>
        <member name="buffs" type="DictArrayKey"  tag="ignore" desc="该等级带来的可用buff"/>
        <member name="buffsText" type="string"   desc="该等级带来的可用buff 格式id,id,id"/>
    </struct>
    <array name="DictModelLevelArray" type="DictModelLevel" desc="" />
    <map name="DictModelLevelMap" key="ui64" value="DictModelLevel" desc="" />


    <struct name="DictModel" store="MyISAM" desc="">
        <member name="modelID" type="ui64" tag="key"   desc=""/>
        <member name="modelName" type="string"   desc=""/>
        <member name="modelRedius" type="double"   desc="碰撞半径"/>
        <member name="iconID"  type="ui64" desc="头像"/>
        <member name="initLevel"  type="double" desc="等级"/>
        <member name="initCamp"  type="ui16" desc=""/>
        <member name="initItems"  type="DictMapKeyPairValue" tag="ignore" desc=""/>
        <member name="initItemsText"  type="string"  desc=""/>
        <member name="initState"  type="ui16" desc="初始化状态"/>
        <member name="actionScriptPath"  type="string" desc="行为树脚本路径"/>
        <member name="clientModelPath"  type="string" desc="客户端模型路径"/>
        <member name="desc" type="string"   desc=""/>
    </struct>
    <array name="DictModelArray" type="DictModel" desc="" />
    <map name="DictModelMap" key="ui64" value="DictModel" desc="" />






    <!-- BUFF类型-->
    <enum type="ui64" name="BUFF_STAMP" desc="">
        <member name="BUFF_HALO"  value="1"  desc="描述性类型: 光环"/>
        <member name="BUFF_BUFF"  value="2"  desc="描述性类型: 增益buff"/>
        <member name="BUFF_DEBUFF"  value="3"  desc="描述性类型: 减益BUFF"/>
        <member name="BUFF_HIDE"  value="4"  desc="描述性类型: 客户端不表现"/>
        <member name="BUFF_PASSIVE"  value="5"  desc="描述性类型: 被动技能, 无法永久存在, 但死亡会停止任何触发"/>
 

        <member name="BUFF_HOLD_MOVE"  value="10"  desc="控制: 禁止移动"/>
        <member name="BUFF_REVERSE_MOVE" value="11"  desc="控制: 移动反向"/>
        <member name="BUFF_SILENCE_GENERAL" value="12"  desc="控制: 沉默普攻"/>
        <member name="BUFF_SILENCE_PHYSICAL" value="13"  desc="控制: 沉默物攻"/>
        <member name="BUFF_SILENCE_MAGIC" value="14"  desc="控制: 沉默法攻"/>


        <member name="BUFF_IMMUNE_MOVE" value="20"  desc="免疫: 免疫移动类控制"/>
        <member name="BUFF_IMMUNE_SILENCE_GENERAL" value="21"  desc="免疫: 免疫普攻沉默"/>
        <member name="BUFF_IMMUNE_SILENCE_PHYSICAL" value="22"  desc="免疫: 免疫物攻沉默"/>
        <member name="BUFF_IMMUNE_SILENCE_MAGIC" value="23"  desc="免疫: 免疫法攻沉默"/>

        <member name="BUFF_IMMUNE_DEBUFF" value="30"  desc="免疫: 免疫DEBUFF"/>
        <member name="BUFF_IMMUNE_BUFF" value="31"  desc="免疫: 免疫增益BUFF"/>
        <member name="BUFF_IMMUNE_OCCUPIED" value="32"  desc="免疫: 免疫占据"/>
        <member name="BUFF_IMMUNE_FLOAT" value="33"  desc="免疫: 免疫击飞"/>
        <member name="BUFF_IMMUNE_MOVEBACK" value="34"  desc="免疫: 免疫击退"/>
        <member name="BUFF_IMMUNE_BREAK" value="35"  desc="免疫: 免疫技能中断"/>

        <member name="BUFF_PROP_MULTIPLICATION" value="40"  desc="属性加成: 乘法, 默认加法"/>

        <member name="BUFF_REAL_DAMAGE" value="41"  desc="真实伤害,直接扣血"/>
        <member name="BUFF_REFLACT_DAMAGE" value="42"  desc="反伤"/>

        <member name="BUFF_NEAR_APPENDBUFF_AND_DIED" value="52"  desc="距离触发buff: 任何非飞行道具实体接近, 对其上一个buff, 然后死掉[buff瓶] 配置:trigger填写要触发的BUFFID, effect为距离"/>
        <member name="BUFF_FOE_NEAR_RUNSKILL_AND_DIED" value="53"  desc="距离触发skill: 任何敌方非飞行道具实体接近, 执行一个技能, 然后死掉[机关地雷] 配置:trigger填写要触发的技能, effect为距离"/>

        <member name="BUFF_PREDIED_APPENDBUFF" value="54"  desc="死亡前触发技能: 死亡前对杀死自己的人上BUFF."/>
        <member name="BUFF_PREDIED_RUNSKILL" value="55"  desc="死亡前触发技能: 死亡前执行一个技能."/>

        <member name="BUFF_HIT_TARGET_APPENDBUFF" value="56"  desc="攻击上buff: 每当攻击一个敌人后给敌人上buff. [浸毒武器 冰刃]"/>
        <member name="BUFF_HIT_SELF_APPENDBUFF" value="57"  desc="攻击上buff: 每当攻击一个敌人给自己上buff. [攻击带加速]"/>
        <member name="BUFF_ONHIT_SELF_APPENDBUFF" value="58"  desc="被打上buff: 每当被攻击后给自己上buff. []"/>
        <member name="BUFF_ONHIT_TARGET_APPENDBUFF" value="59"  desc="被打上buff: 每当被攻击后给敌人上buff. [冰甲减速]"/>
    </enum>

    <!-- BUFF EFFECT 标记-->
    <enum type="ui64" name="BUFF_EFFECT_STAMP" desc="">
        <member name="BUFF_EFFECT_TRIGGER_WHEN_LOAD" value="1"  desc="加载buff立刻触发"/>
        <member name="BUFF_EFFECT_TRIGGER_WHEN_UNLOAD" value="2"  desc="卸载buff立刻触发"/>
        <member name="BUFF_EFFECT_PROP_MULTIPLICATION" value="3"  desc="属性求积, 没有该标记为求和"/>


        <member name="BUFF_EFFECT_TRIGGER_PRE_DEATH" value="10"  desc="死亡前触发"/>
        <member name="BUFF_EFFECT_TRIGGER_AFT_DEATH" value="11"  desc="死亡后触发"/>


        <member name="BUFF_EFFECT_TRIGGER_WHEN_GENERAL" value="15"  desc="攻击触发"/>
        <member name="BUFF_EFFECT_TRIGGER_WHEN_PHYSICAL" value="16"  desc="攻击触发"/>
        <member name="BUFF_EFFECT_TRIGGER_WHEN_MAGIC" value="17"  desc="攻击触发"/>

        <member name="BUFF_EFFECT_TRIGGER_ON_GENERAL" value="20"  desc="被攻击触发"/>
        <member name="BUFF_EFFECT_TRIGGER_ON_PHYSICAL" value="21"  desc="被攻击触发"/>
        <member name="BUFF_EFFECT_TRIGGER_ON_MAGIC" value="22"  desc="被攻击触发"/>


        <member name="BUFF_EFFECT_TRIGGER_WHEN_ATTACH_GENERAL" value="30"  desc="攻击触发"/>
        <member name="BUFF_EFFECT_TRIGGER_WHEN_ON_ATTACH" value="31"  desc="被攻击触发"/>

        <member name="BUFF_EFFECT_TRIGGER_AFT_DEATH" value="32"  desc="死亡后触发"/>
        <member name="BUFF_EFFECT_TRIGGER_AFT_DEATH" value="33"  desc="死亡后触发"/>
    </enum>



    <struct name="DictBuffEffect" store="MyISAM" desc="">
        <member name="id" type="ui64" tag="key"   desc=""/>
        <member name="stamp" type="ui64" tag="ignore" desc="BUFF_EFFECT_STAMP"/>
        <member name="stampText" type="string"  desc=""/>
        <member name="propID" type="ui64"   desc="提升的属性效果, 求积方式的参数是基础属性 不算其他装备"/>
        <member name="skills" type="DictArrayKey" tag="ignore"  desc="触发技能"/>
        <member name="skillsText" type="string"   desc="触发技能 格式id,id,id "/>
        <member name="buffs" type="DictArrayKey"  tag="ignore" desc="触发buff"/>
        <member name="buffsText" type="string"   desc="触发buff 格式id,id,id"/>

        <member name="delayTrigger" type="double"   desc="延迟触发, 0为无效"/>
        <member name="areaTrigger" type="double"   desc="距离触发, 0为无效"/>
        <member name="intervalLimit" type="double"   desc="最小触发间隔时间, 0为无效"/>
        <member name="countLimit" type="double"   desc="触发次数限制"/>

        <member name="desc" type="string"   desc=""/>
    </struct>

    <struct name="DictBuff" store="MyISAM" desc="">
        <member name="id" type="ui64" tag="key"   desc=""/>
        <member name="stamp" type="ui64" tag="ignore" desc="BUFF_STAMP"/>
        <member name="stampText" type="string"  desc=""/>

        <member name="effects" type="DictArrayKey" tag="ignore" desc="DictBuffEffect ID"/>
        <member name="effectsText" type="string"  desc=""/>

        <member name="keepTime"  type="double" desc=""/>
        
        <member name="mutexType" type="ui16"   desc="0无互斥, 1 同ID时间叠加, 2 同ID时间最长的覆盖, 3 同ID最强的覆盖"/>
        <member name="mutexID" type="ui64"   desc="0"/>
        <member name="mutexStrength" type="double"   desc=""/>
        <member name="limitTime"  type="double" desc=""/>
        <member name="desc" type="string"   desc=""/>
    </struct>


    <!-- SKILL类型 (组合位结构) -->
    <enum type="ui64" name="SKILL_STAMP" desc="">
        <member name="SKILL_NONE"  desc=""/>
        <member name="SKILL_AUTO" desc="自动循环攻击"/>
        <member name="SKILL_PASSIVE"    desc="被动技能"/>
        <member name="SKILL_CAN_BREAK"   desc="可被中断"/>
        <member name="SKILL_CAN_MOVE"   desc="可移动"/>
        <member name="SKILL_PHYSICAL"    desc="物理攻击"/>
        <member name="SKILL_MAGIC"    desc="魔法攻击"/>
    </enum>

    <!-- SKILL行为(组合位结构)  -->
    <enum type="ui64" name="SKILL_BEHAVIOUR_STAMP" desc="">
        <member name="SKILL_BEHAVIOUR_NONE"  desc=""/>
        <member name="SKILL_BEHAVIOUR_HIT"   desc="攻击"/>
        <member name="SKILL_BEHAVIOUR_TELEPORT_TARGET"   desc="瞬移到目标"/>
        <member name="SKILL_BEHAVIOUR_BREAK_MOVE"   desc="打断移动"/>
        <member name="SKILL_BEHAVIOUR_BREAK_SKILL"   desc="打断技能"/>
        <member name="SKILL_BEHAVIOUR_REMOVE_DEBUFF"   desc="驱散减益BUFF"/>
        <member name="SKILL_BEHAVIOUR_REMOVE_BUFF"   desc="驱散增益BUFF"/>
        <member name="SKILL_BEHAVIOUR_TRIGGER_BUFF"   desc="触发buff"/>
        <member name="SKILL_BEHAVIOUR_TRIGGER_SKILL"   desc="触发技能"/>
    </enum>



    <struct name="DictSkill" store="MyISAM" desc="">
        <member name="id" type="ui64" tag="key"   desc=""/>
        <member name="effectID" type="ui64"   desc=""/>
        <member name="hpMode" type="ui16"   desc="0 相加, 1与总血量相乘后再相加, 2与剩余血量相乘后再相加, 3与已损失血量相乘后叠加"/>
        <member name="hpLeft" type="double"   desc="当前血量提升, 如果是求积 则是"/>
        <member name="desc" type="string"   desc=""/>
    </struct>



</Proto>

